TO BE CHECKED IN MY SAP HANA CLUSTER:
- GET SPS8, CHECK full sync mode
===> Changes in hdbnsutil-output?

TODO: Add the cluster related checks
TODO: Final Check numbers

01 Host Name
hostname ; hostname -f
-> should be different (first without domain, second with domain)
-> should be lower cased only and only alpha-numeric chars

02 Check Software
-> Updates available?
-> Update channels configured?

03 Check Network Services
-> NTP - Setup?
-> date (on both nodes)

04 Check hostname and user/group resolver
[/etc/hosts, /etc/passwd, /etc/shadow, /etc/groups]
-> hosts, users, groups... MUST be resolved locally

05 Check SAP HANA Installation Location
-> should be /usr/sap/<SID>/HDB<INO>/
-> and /hana/<SID>

06 Check SAPHOSTAGENT Installation Location
-> should be /usr/sap/hostctrl

07 Check saphostagent output
/usr/sap/hostctrl/exe/saphostctrl -function ListInstances
-> Something like: Inst Info : SLE - 00 - fscs98 - 740, patch 36, changelist 1444691
-> should print the already installed SAP HANA Instances
-> In best the saphostname is equal to the hostname (fscs98 in the example)
-> saphostname should be lower cased only and only alpha-numeric chars

X08 Check UserStore (as root)
export PATH=$PATH:/usr/sap/<SID>/HDB<INO>/exe
hdbuserstore list
-> should print a key definition for slehaloc

X09 Check Database connectivity (as root)
export PATH=$PATH:/usr/sap/<SID>/HDB<INO>/exe
hdbsql -U slehaloc 'select * from dummy'
-> User should be able to access the database

X10 Check Status of the SAP HANA start/stop framework (as <sid>adm)
sapcontrol -nr NN -function Start
sapcontrol -nr NN -function Stop
-> Does the SAP HANA instance react properly?

X11 Check Status of SAP HANA LandscapeConfiguration Detection (as <sid>adm)
python exe/python_support/landscapeHostConfiguration.py
-> Something like:
| Host   | Host   | Host   | Failover | Remove | Storage   | Failover | Failover     | NameServer  | NameServer  | IndexServer | IndexServer |
|        | Active | Status | Status   | Status | Partition | Config Group | Actual Group | Config Role | Actual Role | Config Role | Actual Role |
| ------ | ------ | ------ | -------- | ------ | --------- | ------------ | ------------ | ----------- | ----------- | ----------- | ----------- |
| fscs98 | yes    | ok     |          |        |         1 | default   | default      | master 1    | master      | worker      | master      |
overall host status: ok
-> check return code (1: Down, 2,3,4: Up)
-> check output format
=> Check this with a stopped and a started instance

X12 Check Status of the system replication topology (as <sid>adm)
hdbnsutil -sr_state
hdbnsutil -sr_state --sapcontrol=1
-> check the output formats

X13 Check SAP HANA Version (as <sid>adm)
HDB version
-> Check version and Build number is "valid"

14 Check two nodes online
-> crm_node --list
-> crm node list

15 SBD
-> Config /etc/sysconfig/sbd
-> sbd -d ... list
-> sbd -d ... dump

16 CIB BASICS
-> SBD (configured like advertised?)
-> CRM (stonth timeout, record peding, ...)



-- 
Fabian Herschel - SAP Architect LinuxLab
SUSE LINUX Products GmbH,Maxfeldstrasse 5, 90409 Nürnberg,Germany
Tel  : +49-179-292-6675
Email: fabian.herschel@suse.de
-----------------------------------------------------------------
SUSE LINUX Products GmbH, GF: Jeff Hawn, Jennifer Guild, Felix Imendörffer, HRB 16746 (AG Nürnberg)
-----------------------------------------------------------------
http://www.suse.com

